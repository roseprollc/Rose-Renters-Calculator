(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{42175:function(e,t,n){Promise.resolve().then(n.bind(n,18777))},18777:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(3827),a=n(64090),o=n(71126),s=n(47907),i=n(15443),c=n(67969),l=n(36091),y=n(28670),h=n(37211),u=n(56288);async function p(e,t){switch(await new Promise(e=>setTimeout(e,1e3)),e.type){case"mortgage":return function(e){let t=e.monthlyPayment,n=e.totalCost,r=e.roi,a="Based on the mortgage analysis for ".concat(e.propertyAddress,", ");return r>10?a+="this property shows strong investment potential with a ".concat(r.toFixed(2),"% ROI. "):r>5?a+="this property has moderate investment potential with a ".concat(r.toFixed(2),"% ROI. "):a+="this property has limited investment potential with a ".concat(r.toFixed(2),"% ROI. "),t<1e3?a+="The monthly payment of ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," is relatively low, making it more accessible. "):t<2e3?a+="The monthly payment of ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," is moderate. "):a+="The monthly payment of ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," is relatively high, which may impact cash flow. "),a+="The total cost of ".concat(n.toLocaleString("en-US",{style:"currency",currency:"USD"})," should be considered in relation to the property's appreciation potential. "),e.interestRate&&(e.interestRate<4?a+="The current interest rate of ".concat(e.interestRate,"% is favorable. "):e.interestRate<6?a+="The current interest rate of ".concat(e.interestRate,"% is moderate. "):a+="The current interest rate of ".concat(e.interestRate,"% is relatively high, which may impact long-term profitability. ")),a}(e);case"rental":return function(e){let t=e.monthlyCashFlow,n=e.annualCashFlow||12*t,r=e.capRate,a="Based on the rental analysis for ".concat(e.propertyAddress,", ");return t>500?a+="this property shows strong cash flow potential with ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," monthly cash flow. "):t>0?a+="this property has positive cash flow of ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," monthly, though it's relatively modest. "):a+="this property has negative cash flow of ".concat(Math.abs(t).toLocaleString("en-US",{style:"currency",currency:"USD"})," monthly, which may not be sustainable long-term. "),r>8?a+="The cap rate of ".concat(r.toFixed(2),"% is excellent, indicating strong potential returns. "):r>5?a+="The cap rate of ".concat(r.toFixed(2),"% is good, indicating reasonable returns. "):a+="The cap rate of ".concat(r.toFixed(2),"% is relatively low, suggesting limited income potential relative to the property value. "),a+="The annual cash flow of ".concat(n.toLocaleString("en-US",{style:"currency",currency:"USD"})," should be considered in relation to maintenance costs and potential vacancies. ")}(e);case"wholesale":return function(e){let t=e.arv,n=e.potentialProfit,r=e.totalInvestment||0,a=e.repairCosts||0,o="Based on the wholesale analysis for ".concat(e.propertyAddress,", ");return n>3e4?o+="this property shows excellent profit potential with ".concat(n.toLocaleString("en-US",{style:"currency",currency:"USD"})," in potential profit. "):n>15e3?o+="this property has good profit potential with ".concat(n.toLocaleString("en-US",{style:"currency",currency:"USD"})," in potential profit. "):o+="this property has limited profit potential with ".concat(n.toLocaleString("en-US",{style:"currency",currency:"USD"})," in potential profit. "),o+="The After Repair Value (ARV) of ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," "),a>0&&(o+="with estimated repair costs of ".concat(a.toLocaleString("en-US",{style:"currency",currency:"USD"})," ")),o+="requires a total investment of ".concat(r.toLocaleString("en-US",{style:"currency",currency:"USD"}),". "),a>.3*t?o+="The high repair costs relative to ARV indicate significant renovation risk. ":a>.15*t?o+="The moderate repair costs suggest manageable renovation requirements. ":o+="The low repair costs suggest minimal renovation requirements. ",o}(e);case"airbnb":return function(e){let t=e.monthlyRevenue,n=e.monthlyProfit||0,r=e.nightlyRate||0,a="Based on the Airbnb analysis for ".concat(e.propertyAddress,", ");return t>5e3?a+="this property shows strong revenue potential with ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," monthly revenue. "):t>3e3?a+="this property has good revenue potential with ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," monthly revenue. "):a+="this property has modest revenue potential with ".concat(t.toLocaleString("en-US",{style:"currency",currency:"USD"})," monthly revenue. "),n>2e3?a+="The monthly profit of ".concat(n.toLocaleString("en-US",{style:"currency",currency:"USD"})," is excellent. "):n>0?a+="The monthly profit of ".concat(n.toLocaleString("en-US",{style:"currency",currency:"USD"})," is positive but modest. "):a+="The monthly loss of ".concat(Math.abs(n).toLocaleString("en-US",{style:"currency",currency:"USD"})," indicates this property may not be profitable as a short-term rental. "),r>0&&(a+="With a nightly rate of ".concat(r.toLocaleString("en-US",{style:"currency",currency:"USD"}),", "),r>200?a+="this property is positioned in the premium segment of the market. ":r>100?a+="this property is positioned in the mid-range segment of the market. ":a+="this property is positioned in the budget segment of the market. "),a}(e);default:return"Unable to generate insights for this analysis type."}}var d=n(29360);function f(){let{data:e,status:t}=(0,o.useSession)(),n=(0,s.useRouter)(),f=(0,d.JD)(),[m,g]=(0,a.useState)([]),[S,w]=(0,a.useState)(!0),[v,U]=(0,a.useState)(null),[x,b]=(0,a.useState)({search:"",type:"all",sortBy:"newest"});(0,a.useEffect)(()=>{if("unauthenticated"===t){n.push("/login");return}let e=async()=>{try{let e=await fetch("/api/analyses");if(!e.ok)throw Error("Failed to fetch analyses");let t=await e.json();g(t)}catch(e){U(e instanceof Error?e.message:"Failed to fetch analyses"),u.Am.error("Failed to load saved analyses")}finally{w(!1)}};"authenticated"===t&&e()},[t,n]);let D=async e=>{try{if(!(await fetch("/api/analyses/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete analysis");g(m.filter(t=>t.id!==e)),u.Am.success("Analysis deleted successfully")}catch(e){u.Am.error("Failed to delete analysis")}},A=async e=>{try{if(!(await fetch("/api/analyses/bulk-delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})})).ok)throw Error("Failed to delete analyses");g(m.filter(t=>!e.includes(t.id))),u.Am.success("Selected analyses deleted successfully")}catch(e){u.Am.error("Failed to delete selected analyses")}},T=async(e,t)=>{u.Am.info("Export functionality coming soon!")},L=async(e,t)=>{u.Am.info("Bulk export functionality coming soon!")},j=async e=>{try{let t=m.find(t=>t.id===e);if(!t)throw Error("Analysis not found");let n=await p(t,f),r={...t,aiSummary:n};if(g(m.map(t=>t.id===e?r:t)),!(await fetch("/api/analyses/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({aiSummary:n})})).ok)throw Error("Failed to save AI insight");return n}catch(e){return console.error("Error generating AI insight:",e),u.Am.error("Failed to generate AI insight"),null}};return S?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):v?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"text-red-500",children:v})}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Saved Analyses"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(y.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)(c.I,{type:"text",placeholder:"Search analyses...",className:"pl-10",value:x.search,onChange:e=>b({...x,search:e.target.value})})]}),(0,r.jsx)(l.z,{variant:"outline",size:"icon",onClick:()=>{},children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(i.U,{analyses:m,filters:x,onDelete:D,onBulkDelete:A,onExport:T,onBulkExport:L,onAskAI:j})]})})}},37211:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},28670:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[505,337,126,965,946,971,69,744],function(){return e(e.s=42175)}),_N_E=e.O()}]);