"use strict";(()=>{var e={};e.id=8881,e.ids=[8881],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},38089:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>v,patchFetch:()=>j,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>y});var a={};t.r(a),t.d(a,{POST:()=>p});var o=t(95419),s=t(69108),n=t(99678),i=t(78070);let d=e=>{let r=e.match(/\b\d{5}\b/);return r?r[0]:""},c=e=>{try{if(e.includes("redfin.com")){let r=new URL(e).pathname.split("/"),t=r[1]||"",a=r[2]||"",o=r.slice(3).filter(e=>e&&"home"!==e&&!e.match(/^\d+$/)),s=o.find(e=>e.match(/^\d{5}$/))||"",n=o.filter(e=>e!==s).map(e=>e.split("-").map(e=>e.match(/^\d+$/)?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")).join(" ");return{address:`${n} ${a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()} ${t.toUpperCase()} ${s}`,zipcode:s||"14214"}}return null}catch(e){return console.error("Error extracting address from URL:",e),null}};async function p(e){try{let{url:r,address:t,zipcode:a}=await e.json(),o=t,s=a;if(r&&!o){let e=c(r);e&&(o=e.address,s=e.zipcode)}if(o&&!s&&(s=d(o)),!o||!s)return i.Z.json({error:"Could not determine property address or zipcode. Please provide these details manually.",requiresManualInput:!0},{status:400});let[n,p,l,u]=await Promise.all([fetch("/api/providers/rentcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:o,zipcode:s})}).then(e=>e.json()).catch(e=>({error:"Failed to fetch RentCast data"})),fetch("/api/providers/hud",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zipcode:s})}).then(e=>e.json()).catch(e=>({error:"Failed to fetch HUD data"})),fetch("/api/providers/airdna",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zipcode:s})}).then(e=>e.json()).catch(e=>({error:"Failed to fetch AirDNA data"})),fetch("/api/providers/census",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zipcode:s})}).then(e=>e.json()).catch(e=>({error:"Failed to fetch Census data"}))]);return i.Z.json({success:!0,propertyDetails:{address:o,zipcode:s,...n.success?n.data:{}},marketData:{...l.success?l.data.marketData:{},...p.success?p.data:{}},demographics:u.success?u.data:{},source:{url:r||null,platform:r?r.includes("redfin.com")?"Redfin":r.includes("zillow.com")?"Zillow":r.includes("realtor.com")?"Realtor.com":"Unknown":"Manual Input"}})}catch(e){return console.error("Property data provider error:",e),i.Z.json({error:"Failed to fetch property data",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/providers/route",pathname:"/api/providers",filename:"route",bundlePath:"app/api/providers/route"},resolvedPagePath:"/Users/wolf/bnb-calc-clone/app/api/providers/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:u,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:f,staticGenerationBailout:y}=l,v="/api/providers/route";function j(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206],()=>t(38089));module.exports=a})();