"use strict";(()=>{var e={};e.id=4571,e.ids=[4571],e.modules={38013:e=>{e.exports=require("mongodb")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},18615:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>S,originalPathname:()=>y,patchFetch:()=>I,requestAsyncStorage:()=>_,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>g});var s={};t.r(s),t.d(s,{GET:()=>c});var n=t(95419),o=t(69108),i=t(99678),a=t(78070),u=t(7429),d=t(23947),l=t(38013);async function c(e,{params:r}){try{let e=await (0,u.getSession)();if(!e?.user)return new a.Z(JSON.stringify({error:"Unauthorized"}),{status:401});let t=(await d.default).db();if(!l.ObjectId.isValid(r.id))return new a.Z(JSON.stringify({error:"Invalid analysis ID"}),{status:400});let s=await t.collection("analyses").findOne({_id:new l.ObjectId(r.id),userId:e.user.sub});if(!s)return new a.Z(JSON.stringify({error:"Analysis not found"}),{status:404});let{_id:n,...o}=s;return a.Z.json({id:n.toString(),...o})}catch(e){return console.error("Error fetching analysis:",e),new a.Z(JSON.stringify({error:"Failed to fetch analysis"}),{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/analysis/[id]/route",pathname:"/api/analysis/[id]",filename:"route",bundlePath:"app/api/analysis/[id]/route"},resolvedPagePath:"/Users/wolf/bnb-calc-clone/app/api/analysis/[id]/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:_,staticGenerationAsyncStorage:f,serverHooks:h,headerHooks:S,staticGenerationBailout:g}=p,y="/api/analysis/[id]/route";function I(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},23947:(e,r,t)=>{let s;t.d(r,{d1:()=>i,xd:()=>s});var n=t(38013);if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");let o=process.env.MONGODB_URI;function i(e){try{return new n.ObjectId(e)}catch(e){throw Error("Invalid ID format")}}s=new n.MongoClient(o,{}).connect()},7429:(e,r,t)=>{var s,n,o,i=t(86843);let a=(0,i.createProxy)(String.raw`/Users/wolf/bnb-calc-clone/node_modules/@auth0/nextjs-auth0/dist/client/hooks/use-user.js`),{__esModule:u,$$typeof:d}=a;a.default,(0,i.createProxy)(String.raw`/Users/wolf/bnb-calc-clone/node_modules/@auth0/nextjs-auth0/dist/client/hooks/use-user.js#useUser`),function(e){e.MISSING_SESSION="missing_session",e.MISSING_REFRESH_TOKEN="missing_refresh_token",e.FAILED_TO_REFRESH_TOKEN="failed_to_refresh_token"}(s||(s={})),function(e){e.MISSING_SESSION="missing_session",e.MISSING_REFRESH_TOKEN="missing_refresh_token",e.FAILED_TO_EXCHANGE="failed_to_exchange_refresh_token"}(n||(n={})),(o||(o={})).MISSING_REQUIRED_OPTIONS="missing_required_options";let l=(0,i.createProxy)(String.raw`/Users/wolf/bnb-calc-clone/node_modules/@auth0/nextjs-auth0/dist/client/providers/auth0-provider.js`),{__esModule:c,$$typeof:p}=l;l.default,(0,i.createProxy)(String.raw`/Users/wolf/bnb-calc-clone/node_modules/@auth0/nextjs-auth0/dist/client/providers/auth0-provider.js#Auth0Provider`)},86843:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createProxy",{enumerable:!0,get:function(){return s}});let s=t(18195).createClientModuleProxy},50482:(e,r,t)=>{e.exports=t(20399)},18195:(e,r,t)=>{e.exports=t(50482).vendored["react-rsc"].ReactServerDOMWebpackServerEdge}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,6206],()=>t(18615));module.exports=s})();