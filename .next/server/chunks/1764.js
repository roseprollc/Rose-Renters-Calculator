exports.id=1764,exports.ids=[1764],exports.modules={38515:(e,t,s)=>{Promise.resolve().then(s.bind(s,24903))},49049:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},13751:(e,t,s)=>{"use strict";s.d(t,{U:()=>ec});var a=s(95344),r=s(3729),i=s(45773),n=s(8974),l=s(85684),o=s(62312);let d=r.forwardRef(({className:e,...t},s)=>a.jsx(l.fC,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:a.jsx(l.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:a.jsx(o.Z,{className:"h-4 w-4"})})}));d.displayName=l.fC.displayName;let c=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));c.displayName="Card";let m=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));m.displayName="CardHeader";let u=r.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...t}));u.displayName="CardTitle",r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let x=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));x.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var f=s(96885),p=s(42739),h=s(5700),g=s(38271),y=s(12704),v=s(25390),b=s(88794),j=s(14513);let N=b.fC,w=b.xz,C=b.h_;b.x8;let S=r.forwardRef(({className:e,...t},s)=>a.jsx(b.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));S.displayName=b.aV.displayName;let A=r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(C,{children:[a.jsx(S,{}),(0,a.jsxs)(b.VY,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,a.jsxs)(b.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));A.displayName=b.VY.displayName;let R=({className:e,...t})=>a.jsx("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});R.displayName="DialogHeader";let k=r.forwardRef(({className:e,...t},s)=>a.jsx(b.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));k.displayName=b.Dx.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(b.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName=b.dk.displayName;var z=s(89128);let P=z.fC,I=r.forwardRef(({className:e,...t},s)=>a.jsx(z.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));I.displayName=z.aV.displayName;let D=r.forwardRef(({className:e,...t},s)=>a.jsx(z.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));D.displayName=z.xz.displayName;let F=r.forwardRef(({className:e,...t},s)=>a.jsx(z.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));F.displayName=z.VY.displayName;var E=s(47674),$=s(34755),U=s(28473),Z=s(97751),V=s(82958);let T=U.fC,O=U.xz;U.ZA,U.Uv,U.Tr,U.Ee,r.forwardRef(({className:e,inset:t,children:s,...r},n)=>(0,a.jsxs)(U.fF,{ref:n,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,a.jsx(Z.Z,{className:"ml-auto h-4 w-4"})]})).displayName=U.fF.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(U.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=U.tu.displayName;let L=r.forwardRef(({className:e,sideOffset:t=4,...s},r)=>a.jsx(U.Uv,{children:a.jsx(U.VY,{ref:r,sideOffset:t,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));L.displayName=U.VY.displayName;let G=r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(U.ck,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));G.displayName=U.ck.displayName,r.forwardRef(({className:e,children:t,checked:s,...r},n)=>(0,a.jsxs)(U.oC,{ref:n,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(U.wU,{children:a.jsx(o.Z,{className:"h-4 w-4"})})}),t]})).displayName=U.oC.displayName,r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(U.Rk,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(U.wU,{children:a.jsx(V.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=U.Rk.displayName,r.forwardRef(({className:e,inset:t,...s},r)=>a.jsx(U.__,{ref:r,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=U.__.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx(U.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=U.Z0.displayName;var _=s(75745);let M=_.fC,H=_.wy,Y=_.Fw;var J=s(54073);let W=(0,r.createContext)({tier:"free"}),B=()=>{let e=(0,r.useContext)(W);if(!e)throw Error("useTier must be used within a TierProvider");return e};var q=s(9282),K=s(92760),Q=s(39156),X=s.n(Q);async function ee(e){let t=document.createElement("div");t.className="p-6 bg-white text-black",t.innerHTML=`
    <div class="mb-4">
      <h1 class="text-2xl font-bold">${e.address}</h1>
      <p class="text-gray-600">${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Analysis</p>
      <p class="text-gray-600">Created: ${new Date(e.createdAt).toLocaleDateString()}</p>
    </div>
    
    <div class="mb-4">
      <h2 class="text-xl font-semibold">Property Details</h2>
      <div class="grid grid-cols-2 gap-2 mt-2">
        ${Object.entries(e.data).filter(([e])=>!["_id","userId","versions"].includes(e)).map(([e,t])=>`
            <div class="flex justify-between">
              <span class="font-medium">${e.replace(/([A-Z])/g," $1").trim()}:</span>
              <span>${"number"==typeof t?t.toLocaleString():t}</span>
            </div>
          `).join("")}
      </div>
    </div>
    
    ${e.autoImproveSuggestions&&e.autoImproveSuggestions.length>0?`
      <div class="mb-4">
        <h2 class="text-xl font-semibold">AI Insights</h2>
        <ul class="list-disc pl-5 mt-2">
          ${e.autoImproveSuggestions.map(e=>`
            <li class="mb-1">${e.suggestion}</li>
          `).join("")}
        </ul>
      </div>
    `:""}
    
    <div class="mt-8 text-center text-gray-500 text-sm">
      <p>Powered by RoseIntel AI</p>
    </div>
  `,document.body.appendChild(t);let s=await (0,q.default)(t,{scale:2,useCORS:!0,logging:!1});document.body.removeChild(t);let a=new K.ZP({orientation:"portrait",unit:"mm",format:"a4"}),r=s.toDataURL("image/png"),i=a.internal.pageSize.getWidth(),n=s.height*i/s.width;return a.addImage(r,"PNG",0,0,i,n),a.output("blob")}async function et(e){let t=new K.ZP({orientation:"portrait",unit:"mm",format:"a4"}),s=10;for(let a=0;a<e.length;a++){let r=e[a];a>0&&(t.addPage(),s=10),t.setFontSize(16),t.text(r.address,10,s),s+=10,t.setFontSize(12),t.text(`${r.type.charAt(0).toUpperCase()+r.type.slice(1)} Analysis`,10,s),s+=5,t.text(`Created: ${new Date(r.createdAt).toLocaleDateString()}`,10,s),s+=10,t.setFontSize(14),t.text("Property Details",10,s),s+=7,t.setFontSize(10),Object.entries(r.data).filter(([e])=>!["_id","userId","versions"].includes(e)).forEach(([e,a])=>{let r=`${e.replace(/([A-Z])/g," $1").trim()}: ${a}`;t.text(r,10,s),s+=5}),r.autoImproveSuggestions&&r.autoImproveSuggestions.length>0&&(s+=5,t.setFontSize(14),t.text("AI Insights",10,s),s+=7,t.setFontSize(10),r.autoImproveSuggestions.forEach(e=>{t.text(`• ${e.suggestion}`,10,s),s+=5})),t.setFontSize(8),t.text("Powered by RoseIntel AI",10,287)}return t.output("blob")}function es({analyses:e,selectedAnalyses:t=[],onExportStart:s,onExportComplete:i}){let{tier:l}=B(),[o,d]=(0,r.useState)(!1),c=t.length>0,m=c?t:e,u="pro"===l?m.length<=5:"elite"===l,x=async e=>{if(c&&!u){$.Am.error("Upgrade to Pro to export multiple analyses at once");return}try{let t,a;d(!0),s?.(),"pdf"===e?(t=c?await et(m):await ee(m[0]),a=`analysis${c?"-bulk":""}.pdf`):(t=c?function(e){let t=e.map(e=>({"Property Address":e.address,"Analysis Type":e.type,"Created Date":new Date(e.createdAt).toLocaleDateString(),...Object.entries(e.data).filter(([e])=>!["_id","userId","versions"].includes(e)).reduce((e,[t,s])=>(e[t.replace(/([A-Z])/g," $1").trim()]=s,e),{})}));return X().unparse(t)}(m):function(e){let t={"Property Address":e.address,"Analysis Type":e.type,"Created Date":new Date(e.createdAt).toLocaleDateString(),...Object.entries(e.data).filter(([e])=>!["_id","userId","versions"].includes(e)).reduce((e,[t,s])=>(e[t.replace(/([A-Z])/g," $1").trim()]=s,e),{})};return X().unparse([t])}(m[0]),a=`analysis${c?"-bulk":""}.csv`);let r="string"==typeof t?`data:text/csv;charset=utf-8,${encodeURIComponent(t)}`:URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),"string"!=typeof t&&URL.revokeObjectURL(r),$.Am.success(`Successfully exported ${c?"analyses":"analysis"} as ${e.toUpperCase()}`)}catch(t){console.error("Export error:",t),$.Am.error(`Failed to export as ${e.toUpperCase()}`)}finally{d(!1),i?.()}};return(0,a.jsxs)(T,{children:[a.jsx(O,{asChild:!0,children:a.jsx(n.z,{variant:"outline",disabled:o,className:"bg-black text-green-500 border-green-500 hover:bg-green-900 hover:text-green-400",children:o?"Exporting...":"Export"})}),(0,a.jsxs)(L,{align:"end",className:"bg-black border-green-500",children:[a.jsx(G,{onClick:()=>x("pdf"),className:"text-green-500 hover:bg-green-900 hover:text-green-400 cursor-pointer",children:"Export as PDF"}),a.jsx(G,{onClick:()=>x("csv"),className:"text-green-500 hover:bg-green-900 hover:text-green-400 cursor-pointer",children:"Export as CSV"})]})]})}var ea=s(89927);let er=(0,s(49247).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ei({className:e,variant:t,...s}){return a.jsx("div",{className:(0,i.cn)(er({variant:t}),e),...s})}var en=s(64989),el=s(96213);function eo({analysis:e,onVersionRestored:t}){let{isProOrElite:s}=B(),[i,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)("timeline"),f=s?i.length:Math.min(2,i.length),p=async a=>{if(!s){$.Am.error("This feature requires a Pro or Elite subscription");return}try{d(!0);let s=await fetch("/api/analyses/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysisId:e.id,versionIndex:i.findIndex(e=>e.id===a)})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to restore version")}$.Am.success("Version restored successfully"),t&&t(),m(!1)}catch(e){console.error("Error restoring version:",e),$.Am.error(e instanceof Error?e.message:"Failed to restore version")}finally{d(!1)}},h=e=>{let t=e.data||{};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-500",children:(0,ea.WU)(new Date(e.createdAt),"MMM d, yyyy h:mm a")}),s&&(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>p(e.id),disabled:o,className:"flex items-center gap-1",children:[a.jsx(en.Z,{className:"h-3 w-3"}),"Restore"]})]}),e.notes&&(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]}),e.aiInsights&&(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"AI Insights:"})," ",e.aiInsights]}),a.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(t).map(([e,t])=>(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e,":"]}),a.jsx("span",{children:"number"==typeof t?t.toLocaleString():String(t)})]},e))})]})};return(0,a.jsxs)(N,{open:c,onOpenChange:m,children:[a.jsx(w,{asChild:!0,children:(0,a.jsxs)(n.z,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[a.jsx(el.Z,{className:"h-4 w-4"}),"History"]})}),(0,a.jsxs)(A,{className:"sm:max-w-[600px]",children:[a.jsx(R,{children:a.jsx(k,{children:"Version History"})}),(0,a.jsxs)(P,{value:u,onValueChange:x,className:"w-full",children:[(0,a.jsxs)(I,{className:"grid w-full grid-cols-2",children:[a.jsx(D,{value:"timeline",children:"Timeline"}),a.jsx(D,{value:"compare",children:"Compare"})]}),a.jsx(F,{value:"timeline",className:"mt-4",children:o?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===i.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No version history available"}):(0,a.jsxs)("div",{className:"space-y-6",children:[i.slice(0,f).map((e,t)=>(0,a.jsxs)("div",{className:`p-4 rounded-lg border ${0===t?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:[0===t&&a.jsx(ei,{className:"mb-2",children:"Current Version"}),h(e)]},e.id)),!s&&i.length>2&&a.jsx("div",{className:"text-center text-sm text-gray-500",children:"Upgrade to Pro or Elite to view full version history"})]})}),a.jsx(F,{value:"compare",className:"mt-4",children:s?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Compare feature coming soon"}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Upgrade to Pro or Elite to compare versions"})})]})]})]})}function ed({analysis:e,isSelected:t,onSelect:s,onDelete:l,onExport:o,onAskAI:b,onVersionRestored:j}){let{data:C}=(0,E.useSession)(),[S,z]=(0,r.useState)(!1),[U,Z]=(0,r.useState)(!1),[V,_]=(0,r.useState)(!1),[W,B]=(0,r.useState)(!1),[q,K]=(0,r.useState)(null),[Q,X]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[ea,er]=(0,r.useState)(null),ei=(0,J.JD)(),en=async()=>{if(l){z(!0);try{await l(e.id)}catch(e){console.error("Error deleting analysis:",e)}finally{z(!1)}}},el=async t=>{if(o){Z(!0);try{await o(e.id,t),$.Am.success(`Analysis exported as ${t.toUpperCase()}`)}catch(e){console.error("Error exporting analysis:",e),$.Am.error("Failed to export analysis")}finally{Z(!1)}}},ed=async()=>{if(b){_(!0);try{et(!0);let t={};"mortgage"===e.type?(t.monthlyPayment=e.monthlyPayment,t.totalCost=e.totalCost,t.roi=e.roi,t.interestRate=e.interestRate):"rental"===e.type?(t.monthlyCashFlow=e.monthlyCashFlow,t.annualCashFlow=e.annualCashFlow,t.capRate=e.capRate):"wholesale"===e.type?(t.arv=e.arv,t.potentialProfit=e.potentialProfit,t.totalInvestment=e.totalInvestment,t.repairCosts=e.repairCosts):"airbnb"===e.type&&(t.monthlyRevenue=e.monthlyRevenue,t.monthlyProfit=e.monthlyProfit,t.nightlyRate=e.nightlyRate);let s=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysisId:e._id,address:e.propertyAddress,type:e.type,metrics:t,notes:e.notes})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to generate insights")}let a=await s.json();er(a.insights),X(!0)}catch(e){console.error("Error generating insights:",e),$.Am.error("Unable to retrieve AI insights. Please try again later.")}finally{_(!1),et(!1)}}},ec=()=>{switch(e.type){case"mortgage":return[{label:"Monthly Payment",value:(0,i.xG)(e.monthlyPayment)},{label:"Total Cost",value:(0,i.xG)(e.totalCost)},{label:"ROI",value:`${e.roi.toFixed(2)}%`}];case"rental":return[{label:"Monthly Cash Flow",value:(0,i.xG)(e.monthlyCashFlow)},{label:"Cap Rate",value:`${e.capRate.toFixed(2)}%`},{label:"Annual Cash Flow",value:(0,i.xG)(e.annualCashFlow)}];case"wholesale":return[{label:"ARV",value:(0,i.xG)(e.arv)},{label:"Potential Profit",value:(0,i.xG)(e.potentialProfit)},{label:"Total Investment",value:(0,i.xG)(e.totalInvestment)}];case"airbnb":return[{label:"Monthly Revenue",value:(0,i.xG)(e.monthlyRevenue)},{label:"Monthly Profit",value:(0,i.xG)(e.monthlyProfit)},{label:"Nightly Rate",value:(0,i.xG)(e.nightlyRate)}];default:return[]}},em=C?.user?.role==="pro"||C?.user?.role==="elite";return(0,a.jsxs)(c,{className:"relative",children:[(0,a.jsxs)(m,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(u,{className:"text-lg font-semibold",children:e.propertyAddress}),a.jsx(d,{checked:t,onCheckedChange:()=>s(e.id),className:"h-4 w-4"})]}),a.jsx("div",{className:"text-sm text-gray-500",children:(0,i.p6)(e.createdAt)})]}),a.jsx(x,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[e.aiSummary&&a.jsx("div",{className:"text-sm text-gray-600",children:e.aiSummary}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:ec().map(e=>(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-gray-500",children:e.label}),a.jsx("div",{className:"font-semibold",children:e.value})]},e.label))}),e.notes&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Notes:"})," ",e.notes]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsxs)(N,{children:[a.jsx(w,{asChild:!0,children:a.jsx(n.z,{variant:"outline",size:"sm",children:"View Details"})}),(0,a.jsxs)(A,{children:[a.jsx(R,{children:a.jsx(k,{children:"Analysis Details"})}),(0,a.jsxs)(P,{defaultValue:"overview",children:[(0,a.jsxs)(I,{children:[a.jsx(D,{value:"overview",children:"Overview"}),a.jsx(D,{value:"metrics",children:"Metrics"}),a.jsx(D,{value:"history",children:"History"})]}),a.jsx(F,{value:"overview",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Property Address"}),a.jsx("p",{children:e.propertyAddress})]}),e.notes&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Notes"}),a.jsx("p",{children:e.notes})]}),e.aiSummary&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"AI Summary"}),a.jsx("p",{children:e.aiSummary})]})]})}),a.jsx(F,{value:"metrics",children:a.jsx("div",{className:"grid grid-cols-2 gap-4",children:ec().map(e=>(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:e.label}),a.jsx("p",{children:e.value})]},e.label))})}),a.jsx(F,{value:"history",children:e.versions&&e.versions.length>0?a.jsx("div",{className:"space-y-4",children:e.versions.map(e=>(0,a.jsxs)("div",{className:"border-b pb-2",children:[a.jsx("div",{className:"text-sm text-gray-500",children:(0,i.p6)(e.createdAt)}),e.notes&&a.jsx("div",{className:"text-sm",children:e.notes})]},e.id))}):a.jsx("div",{className:"text-sm text-gray-500",children:"No version history available"})})]})]})]}),em&&(0,a.jsxs)(T,{children:[a.jsx(O,{asChild:!0,children:(0,a.jsxs)(n.z,{variant:"outline",size:"sm",disabled:U,children:[a.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,a.jsxs)(L,{children:[a.jsx(G,{onClick:()=>el("pdf"),children:"Export as PDF"}),a.jsx(G,{onClick:()=>el("csv"),children:"Export as CSV"})]})]}),"free"!==ei&&(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:ed,disabled:ee,className:"flex items-center space-x-1",children:[ee?a.jsx(p.Z,{className:"h-4 w-4 animate-spin"}):a.jsx(h.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Ask AI"})]}),l&&a.jsx(n.z,{variant:"destructive",size:"sm",onClick:en,disabled:S,children:S?"Deleting...":a.jsx(g.Z,{className:"h-4 w-4"})})]})]})}),a.jsx(M,{open:Q,onOpenChange:X,children:a.jsx(H,{asChild:!0,children:a.jsx(n.z,{variant:"ghost",size:"sm",children:Q?a.jsx(y.Z,{className:"h-4 w-4"}):a.jsx(v.Z,{className:"h-4 w-4"})})})}),(0,a.jsxs)(Y,{className:"mt-4",children:[a.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:ec().map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[a.jsx("p",{className:"text-sm text-gray-500",children:e.label}),a.jsx("p",{className:"font-medium",children:e.value})]},t))}),ea&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-100",children:[(0,a.jsxs)("h4",{className:"font-medium text-blue-800 mb-2 flex items-center",children:[a.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"AI Insights"]}),a.jsx("p",{className:"text-sm text-blue-700",children:ea})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-700",children:e.notes})]})]}),(0,a.jsxs)(CardFooter,{className:"flex justify-between pt-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(eo,{analysis:e,onVersionRestored:j}),a.jsx(es,{analysis:e})]}),a.jsx(n.z,{variant:"ghost",size:"sm",onClick:en,disabled:S,className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:S?"Deleting...":"Delete"})]})]})}function ec({analyses:e,filters:t,onDelete:s,onBulkDelete:i,onExport:l,onBulkExport:o,onAskAI:d}){let{data:c}=(0,E.useSession)(),[m,u]=(0,r.useState)([]),[x,p]=(0,r.useState)(!1),h=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},y=async()=>{if(i&&0!==m.length)try{await i(m),u([]),$.Am.success("Selected analyses deleted successfully")}catch(e){console.error("Error deleting analyses:",e),$.Am.error("Failed to delete analyses")}},v=async e=>{if(o&&0!==m.length){p(!0);try{await o(m,e),$.Am.success(`Selected analyses exported as ${e.toUpperCase()}`)}catch(e){console.error("Error exporting analyses:",e),$.Am.error("Failed to export analyses")}finally{p(!1)}}},b=c?.user?.role==="pro"||c?.user?.role==="elite",j=[...e.filter(e=>(!t.search||!!e.propertyAddress.toLowerCase().includes(t.search.toLowerCase()))&&("all"===t.type||e.type===t.type))].sort((e,s)=>{switch(t.sortBy){case"newest":return new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime();case"oldest":return new Date(e.createdAt).getTime()-new Date(s.createdAt).getTime();case"price-high":return(s.data.price||0)-(e.data.price||0);case"price-low":return(e.data.price||0)-(s.data.price||0);case"revenue-high":return(s.data.revenue||0)-(e.data.revenue||0);case"revenue-low":return(e.data.revenue||0)-(s.data.revenue||0);default:return 0}});return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("div",{className:"flex items-center space-x-2",children:m.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.z,{variant:"destructive",size:"sm",onClick:y,disabled:!i,children:[a.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Delete Selected"]}),b&&(0,a.jsxs)(T,{children:[a.jsx(O,{asChild:!0,children:(0,a.jsxs)(n.z,{variant:"outline",size:"sm",disabled:x,children:[a.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Export Selected"]})}),(0,a.jsxs)(L,{children:[a.jsx(G,{onClick:()=>v("pdf"),children:"Export as PDF"}),a.jsx(G,{onClick:()=>v("csv"),children:"Export as CSV"})]})]})]})})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(e=>a.jsx(ed,{analysis:e,isSelected:m.includes(e.id),onSelect:h,onDelete:s,onExport:l,onAskAI:d},e.id))}),0===j.length&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"No analyses found"})})]})}},8974:(e,t,s)=>{"use strict";s.d(t,{z:()=>d});var a=s(95344),r=s(3729),i=s(32751),n=s(49247),l=s(45773);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...n},d)=>{let c=r?i.g7:"button";return a.jsx(c,{className:(0,l.cn)(o({variant:t,size:s,className:e})),ref:d,...n})});d.displayName="Button"},52072:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var a=s(95344),r=s(3729),i=s(45773);let n=r.forwardRef(({className:e,type:t,...s},r)=>a.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));n.displayName="Input"},54073:(e,t,s)=>{"use strict";s.d(t,{JD:()=>r});var a=s(47674);function r(){let{data:e}=(0,a.useSession)();if(!e?.user)return"free";let t=e.user.role;return"elite"===t?"elite":"pro"===t?"pro":"free"}},24903:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(95344),r=s(97410),i=s.n(r);s(4047);var n=s(44669),l=s(47674),o=s(3729);let d=(0,o.createContext)({tier:"free",isLoading:!0,error:null});function c({children:e}){let{data:t,status:s}=(0,l.useSession)(),[r,i]=(0,o.useState)("free"),[n,c]=(0,o.useState)(!0),[m,u]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async function(){if("loading"!==s){if(!t?.user){i("free"),c(!1);return}if(t.user.subscriptionTier){i(t.user.subscriptionTier),c(!1);return}try{let e=await fetch("/api/user/tier");if(!e.ok)throw Error("Failed to fetch tier");let t=await e.json();i(t.tier)}catch(e){console.error("Error fetching tier:",e),u(e instanceof Error?e.message:"Failed to fetch tier"),i("free")}finally{c(!1)}}})()},[t,s]),a.jsx(d.Provider,{value:{tier:r,isLoading:n,error:m},children:e})}function m({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:i().className,children:a.jsx(l.SessionProvider,{children:(0,a.jsxs)(c,{children:[e,a.jsx(n.x7,{})]})})})})}},45773:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i,p6:()=>l,xG:()=>n});var a=s(56815),r=s(79377);function i(...e){return(0,r.m6)((0,a.W)(e))}function n(e){return void 0===e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function l(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},82917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,s(86843).createProxy)(String.raw`/Users/wolf/bnb-calc-clone/app/layout.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default},4047:()=>{}};