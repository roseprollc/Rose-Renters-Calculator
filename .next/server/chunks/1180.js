exports.id=1180,exports.ids=[1180],exports.modules={36911:(e,s,t)=>{Promise.resolve().then(t.bind(t,13371))},49049:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,43982,23))},13371:(e,s,t)=>{"use strict";t.r(s),t.d(s,{ClientProviders:()=>o});var a=t(95344),r=t(47674),n=t(44669),i=t(63956),l=t(94299);function o({children:e}){return a.jsx(r.SessionProvider,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-black text-[#2ecc71] antialiased",children:[e,a.jsx(n.x7,{}),a.jsx(i.c,{}),a.jsx(l.c,{})]})})}},13751:(e,s,t)=>{"use strict";t.d(s,{U:()=>ec});var a=t(95344),r=t(3729),n=t(45773),i=t(8974),l=t(85684),o=t(62312);let d=r.forwardRef(({className:e,...s},t)=>a.jsx(l.fC,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(l.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:a.jsx(o.Z,{className:"h-4 w-4"})})}));d.displayName=l.fC.displayName;let c=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));c.displayName="Card";let m=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));m.displayName="CardHeader";let u=r.forwardRef(({className:e,...s},t)=>a.jsx("h3",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...s}));u.displayName="CardTitle",r.forwardRef(({className:e,...s},t)=>a.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let x=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));x.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";var p=t(96885),f=t(42739),h=t(5700),g=t(38271),y=t(12704),v=t(25390),b=t(88794),j=t(14513);let N=b.fC,w=b.xz,C=b.h_;b.x8;let S=r.forwardRef(({className:e,...s},t)=>a.jsx(b.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));S.displayName=b.aV.displayName;let A=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(C,{children:[a.jsx(S,{}),(0,a.jsxs)(b.VY,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(b.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(j.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));A.displayName=b.VY.displayName;let R=({className:e,...s})=>a.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});R.displayName="DialogHeader";let P=r.forwardRef(({className:e,...s},t)=>a.jsx(b.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));P.displayName=b.Dx.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(b.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s})).displayName=b.dk.displayName;var k=t(89128);let z=k.fC,I=r.forwardRef(({className:e,...s},t)=>a.jsx(k.aV,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));I.displayName=k.aV.displayName;let D=r.forwardRef(({className:e,...s},t)=>a.jsx(k.xz,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));D.displayName=k.xz.displayName;let F=r.forwardRef(({className:e,...s},t)=>a.jsx(k.VY,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));F.displayName=k.VY.displayName;var E=t(47674),$=t(34755),U=t(28473),Z=t(97751),V=t(82958);let T=U.fC,O=U.xz;U.ZA,U.Uv,U.Tr,U.Ee,r.forwardRef(({className:e,inset:s,children:t,...r},i)=>(0,a.jsxs)(U.fF,{ref:i,className:(0,n.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...r,children:[t,a.jsx(Z.Z,{className:"ml-auto h-4 w-4"})]})).displayName=U.fF.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(U.tu,{ref:t,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=U.tu.displayName;let L=r.forwardRef(({className:e,sideOffset:s=4,...t},r)=>a.jsx(U.Uv,{children:a.jsx(U.VY,{ref:r,sideOffset:s,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));L.displayName=U.VY.displayName;let G=r.forwardRef(({className:e,inset:s,...t},r)=>a.jsx(U.ck,{ref:r,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...t}));G.displayName=U.ck.displayName,r.forwardRef(({className:e,children:s,checked:t,...r},i)=>(0,a.jsxs)(U.oC,{ref:i,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(U.wU,{children:a.jsx(o.Z,{className:"h-4 w-4"})})}),s]})).displayName=U.oC.displayName,r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(U.Rk,{ref:r,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(U.wU,{children:a.jsx(V.Z,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=U.Rk.displayName,r.forwardRef(({className:e,inset:s,...t},r)=>a.jsx(U.__,{ref:r,className:(0,n.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t})).displayName=U.__.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(U.Z0,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=U.Z0.displayName;var M=t(75745);let _=M.fC,H=M.wy,Y=M.Fw;var W=t(54073);let J=(0,r.createContext)({tier:"free"}),B=()=>{let e=(0,r.useContext)(J);if(!e)throw Error("useTier must be used within a TierProvider");return e};var q=t(9282),K=t(92760),Q=t(39156),X=t.n(Q);async function ee(e){let s=document.createElement("div");s.className="p-6 bg-white text-black",s.innerHTML=`
    <div class="mb-4">
      <h1 class="text-2xl font-bold">${e.address}</h1>
      <p class="text-gray-600">${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Analysis</p>
      <p class="text-gray-600">Created: ${new Date(e.createdAt).toLocaleDateString()}</p>
    </div>
    
    <div class="mb-4">
      <h2 class="text-xl font-semibold">Property Details</h2>
      <div class="grid grid-cols-2 gap-2 mt-2">
        ${Object.entries(e.data).filter(([e])=>!["_id","userId","versions"].includes(e)).map(([e,s])=>`
            <div class="flex justify-between">
              <span class="font-medium">${e.replace(/([A-Z])/g," $1").trim()}:</span>
              <span>${"number"==typeof s?s.toLocaleString():s}</span>
            </div>
          `).join("")}
      </div>
    </div>
    
    ${e.autoImproveSuggestions&&e.autoImproveSuggestions.length>0?`
      <div class="mb-4">
        <h2 class="text-xl font-semibold">AI Insights</h2>
        <ul class="list-disc pl-5 mt-2">
          ${e.autoImproveSuggestions.map(e=>`
            <li class="mb-1">${e.suggestion}</li>
          `).join("")}
        </ul>
      </div>
    `:""}
    
    <div class="mt-8 text-center text-gray-500 text-sm">
      <p>Powered by RoseIntel AI</p>
    </div>
  `,document.body.appendChild(s);let t=await (0,q.default)(s,{scale:2,useCORS:!0,logging:!1});document.body.removeChild(s);let a=new K.ZP({orientation:"portrait",unit:"mm",format:"a4"}),r=t.toDataURL("image/png"),n=a.internal.pageSize.getWidth(),i=t.height*n/t.width;return a.addImage(r,"PNG",0,0,n,i),a.output("blob")}async function es(e){let s=new K.ZP({orientation:"portrait",unit:"mm",format:"a4"}),t=10;for(let a=0;a<e.length;a++){let r=e[a];a>0&&(s.addPage(),t=10),s.setFontSize(16),s.text(r.address,10,t),t+=10,s.setFontSize(12),s.text(`${r.type.charAt(0).toUpperCase()+r.type.slice(1)} Analysis`,10,t),t+=5,s.text(`Created: ${new Date(r.createdAt).toLocaleDateString()}`,10,t),t+=10,s.setFontSize(14),s.text("Property Details",10,t),t+=7,s.setFontSize(10),Object.entries(r.data).filter(([e])=>!["_id","userId","versions"].includes(e)).forEach(([e,a])=>{let r=`${e.replace(/([A-Z])/g," $1").trim()}: ${a}`;s.text(r,10,t),t+=5}),r.autoImproveSuggestions&&r.autoImproveSuggestions.length>0&&(t+=5,s.setFontSize(14),s.text("AI Insights",10,t),t+=7,s.setFontSize(10),r.autoImproveSuggestions.forEach(e=>{s.text(`â€¢ ${e.suggestion}`,10,t),t+=5})),s.setFontSize(8),s.text("Powered by RoseIntel AI",10,287)}return s.output("blob")}function et({analyses:e,selectedAnalyses:s=[],onExportStart:t,onExportComplete:n}){let{tier:l}=B(),[o,d]=(0,r.useState)(!1),c=s.length>0,m=c?s:e,u="pro"===l?m.length<=5:"elite"===l,x=async e=>{if(c&&!u){$.Am.error("Upgrade to Pro to export multiple analyses at once");return}try{let s,a;d(!0),t?.(),"pdf"===e?(s=c?await es(m):await ee(m[0]),a=`analysis${c?"-bulk":""}.pdf`):(s=c?function(e){let s=e.map(e=>({"Property Address":e.address,"Analysis Type":e.type,"Created Date":new Date(e.createdAt).toLocaleDateString(),...Object.entries(e.data).filter(([e])=>!["_id","userId","versions"].includes(e)).reduce((e,[s,t])=>(e[s.replace(/([A-Z])/g," $1").trim()]=t,e),{})}));return X().unparse(s)}(m):function(e){let s={"Property Address":e.address,"Analysis Type":e.type,"Created Date":new Date(e.createdAt).toLocaleDateString(),...Object.entries(e.data).filter(([e])=>!["_id","userId","versions"].includes(e)).reduce((e,[s,t])=>(e[s.replace(/([A-Z])/g," $1").trim()]=t,e),{})};return X().unparse([s])}(m[0]),a=`analysis${c?"-bulk":""}.csv`);let r="string"==typeof s?`data:text/csv;charset=utf-8,${encodeURIComponent(s)}`:URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),"string"!=typeof s&&URL.revokeObjectURL(r),$.Am.success(`Successfully exported ${c?"analyses":"analysis"} as ${e.toUpperCase()}`)}catch(s){console.error("Export error:",s),$.Am.error(`Failed to export as ${e.toUpperCase()}`)}finally{d(!1),n?.()}};return(0,a.jsxs)(T,{children:[a.jsx(O,{asChild:!0,children:a.jsx(i.z,{variant:"outline",disabled:o,className:"bg-black text-green-500 border-green-500 hover:bg-green-900 hover:text-green-400",children:o?"Exporting...":"Export"})}),(0,a.jsxs)(L,{align:"end",className:"bg-black border-green-500",children:[a.jsx(G,{onClick:()=>x("pdf"),className:"text-green-500 hover:bg-green-900 hover:text-green-400 cursor-pointer",children:"Export as PDF"}),a.jsx(G,{onClick:()=>x("csv"),className:"text-green-500 hover:bg-green-900 hover:text-green-400 cursor-pointer",children:"Export as CSV"})]})]})}var ea=t(89927);let er=(0,t(49247).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function en({className:e,variant:s,...t}){return a.jsx("div",{className:(0,n.cn)(er({variant:s}),e),...t})}var ei=t(64989),el=t(96213);function eo({analysis:e,onVersionRestored:s}){let{isProOrElite:t}=B(),[n,l]=(0,r.useState)([]),[o,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)("timeline"),p=t?n.length:Math.min(2,n.length),f=async a=>{if(!t){$.Am.error("This feature requires a Pro or Elite subscription");return}try{d(!0);let t=await fetch("/api/analyses/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysisId:e.id,versionIndex:n.findIndex(e=>e.id===a)})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to restore version")}$.Am.success("Version restored successfully"),s&&s(),m(!1)}catch(e){console.error("Error restoring version:",e),$.Am.error(e instanceof Error?e.message:"Failed to restore version")}finally{d(!1)}},h=e=>{let s=e.data||{};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-500",children:(0,ea.WU)(new Date(e.createdAt),"MMM d, yyyy h:mm a")}),t&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>f(e.id),disabled:o,className:"flex items-center gap-1",children:[a.jsx(ei.Z,{className:"h-3 w-3"}),"Restore"]})]}),e.notes&&(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]}),e.aiInsights&&(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"AI Insights:"})," ",e.aiInsights]}),a.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(s).map(([e,s])=>(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e,":"]}),a.jsx("span",{children:"number"==typeof s?s.toLocaleString():String(s)})]},e))})]})};return(0,a.jsxs)(N,{open:c,onOpenChange:m,children:[a.jsx(w,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[a.jsx(el.Z,{className:"h-4 w-4"}),"History"]})}),(0,a.jsxs)(A,{className:"sm:max-w-[600px]",children:[a.jsx(R,{children:a.jsx(P,{children:"Version History"})}),(0,a.jsxs)(z,{value:u,onValueChange:x,className:"w-full",children:[(0,a.jsxs)(I,{className:"grid w-full grid-cols-2",children:[a.jsx(D,{value:"timeline",children:"Timeline"}),a.jsx(D,{value:"compare",children:"Compare"})]}),a.jsx(F,{value:"timeline",className:"mt-4",children:o?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===n.length?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No version history available"}):(0,a.jsxs)("div",{className:"space-y-6",children:[n.slice(0,p).map((e,s)=>(0,a.jsxs)("div",{className:`p-4 rounded-lg border ${0===s?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:[0===s&&a.jsx(en,{className:"mb-2",children:"Current Version"}),h(e)]},e.id)),!t&&n.length>2&&a.jsx("div",{className:"text-center text-sm text-gray-500",children:"Upgrade to Pro or Elite to view full version history"})]})}),a.jsx(F,{value:"compare",className:"mt-4",children:t?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Compare feature coming soon"}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Upgrade to Pro or Elite to compare versions"})})]})]})]})}function ed({analysis:e,isSelected:s,onSelect:t,onDelete:l,onExport:o,onAskAI:b,onVersionRestored:j}){let{data:C}=(0,E.useSession)(),[S,k]=(0,r.useState)(!1),[U,Z]=(0,r.useState)(!1),[V,M]=(0,r.useState)(!1),[J,B]=(0,r.useState)(!1),[q,K]=(0,r.useState)(null),[Q,X]=(0,r.useState)(!1),[ee,es]=(0,r.useState)(!1),[ea,er]=(0,r.useState)(null),en=(0,W.JD)(),ei=async()=>{if(l){k(!0);try{await l(e.id)}catch(e){console.error("Error deleting analysis:",e)}finally{k(!1)}}},el=async s=>{if(o){Z(!0);try{await o(e.id,s),$.Am.success(`Analysis exported as ${s.toUpperCase()}`)}catch(e){console.error("Error exporting analysis:",e),$.Am.error("Failed to export analysis")}finally{Z(!1)}}},ed=async()=>{if(b){M(!0);try{es(!0);let s={};"mortgage"===e.type?(s.monthlyPayment=e.monthlyPayment,s.totalCost=e.totalCost,s.roi=e.roi,s.interestRate=e.interestRate):"rental"===e.type?(s.monthlyCashFlow=e.monthlyCashFlow,s.annualCashFlow=e.annualCashFlow,s.capRate=e.capRate):"wholesale"===e.type?(s.arv=e.arv,s.potentialProfit=e.potentialProfit,s.totalInvestment=e.totalInvestment,s.repairCosts=e.repairCosts):"airbnb"===e.type&&(s.monthlyRevenue=e.monthlyRevenue,s.monthlyProfit=e.monthlyProfit,s.nightlyRate=e.nightlyRate);let t=await fetch("/api/agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysisId:e._id,address:e.propertyAddress,type:e.type,metrics:s,notes:e.notes})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to generate insights")}let a=await t.json();er(a.insights),X(!0)}catch(e){console.error("Error generating insights:",e),$.Am.error("Unable to retrieve AI insights. Please try again later.")}finally{M(!1),es(!1)}}},ec=()=>{switch(e.type){case"mortgage":return[{label:"Monthly Payment",value:(0,n.xG)(e.monthlyPayment)},{label:"Total Cost",value:(0,n.xG)(e.totalCost)},{label:"ROI",value:`${e.roi.toFixed(2)}%`}];case"rental":return[{label:"Monthly Cash Flow",value:(0,n.xG)(e.monthlyCashFlow)},{label:"Cap Rate",value:`${e.capRate.toFixed(2)}%`},{label:"Annual Cash Flow",value:(0,n.xG)(e.annualCashFlow)}];case"wholesale":return[{label:"ARV",value:(0,n.xG)(e.arv)},{label:"Potential Profit",value:(0,n.xG)(e.potentialProfit)},{label:"Total Investment",value:(0,n.xG)(e.totalInvestment)}];case"airbnb":return[{label:"Monthly Revenue",value:(0,n.xG)(e.monthlyRevenue)},{label:"Monthly Profit",value:(0,n.xG)(e.monthlyProfit)},{label:"Nightly Rate",value:(0,n.xG)(e.nightlyRate)}];default:return[]}},em=C?.user?.role==="pro"||C?.user?.role==="elite";return(0,a.jsxs)(c,{className:"relative",children:[(0,a.jsxs)(m,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(u,{className:"text-lg font-semibold",children:e.propertyAddress}),a.jsx(d,{checked:s,onCheckedChange:()=>t(e.id),className:"h-4 w-4"})]}),a.jsx("div",{className:"text-sm text-gray-500",children:(0,n.p6)(e.createdAt)})]}),a.jsx(x,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[e.aiSummary&&a.jsx("div",{className:"text-sm text-gray-600",children:e.aiSummary}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:ec().map(e=>(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-gray-500",children:e.label}),a.jsx("div",{className:"font-semibold",children:e.value})]},e.label))}),e.notes&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Notes:"})," ",e.notes]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsxs)(N,{children:[a.jsx(w,{asChild:!0,children:a.jsx(i.z,{variant:"outline",size:"sm",children:"View Details"})}),(0,a.jsxs)(A,{children:[a.jsx(R,{children:a.jsx(P,{children:"Analysis Details"})}),(0,a.jsxs)(z,{defaultValue:"overview",children:[(0,a.jsxs)(I,{children:[a.jsx(D,{value:"overview",children:"Overview"}),a.jsx(D,{value:"metrics",children:"Metrics"}),a.jsx(D,{value:"history",children:"History"})]}),a.jsx(F,{value:"overview",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Property Address"}),a.jsx("p",{children:e.propertyAddress})]}),e.notes&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Notes"}),a.jsx("p",{children:e.notes})]}),e.aiSummary&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:"AI Summary"}),a.jsx("p",{children:e.aiSummary})]})]})}),a.jsx(F,{value:"metrics",children:a.jsx("div",{className:"grid grid-cols-2 gap-4",children:ec().map(e=>(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold",children:e.label}),a.jsx("p",{children:e.value})]},e.label))})}),a.jsx(F,{value:"history",children:e.versions&&e.versions.length>0?a.jsx("div",{className:"space-y-4",children:e.versions.map(e=>(0,a.jsxs)("div",{className:"border-b pb-2",children:[a.jsx("div",{className:"text-sm text-gray-500",children:(0,n.p6)(e.createdAt)}),e.notes&&a.jsx("div",{className:"text-sm",children:e.notes})]},e.id))}):a.jsx("div",{className:"text-sm text-gray-500",children:"No version history available"})})]})]})]}),em&&(0,a.jsxs)(T,{children:[a.jsx(O,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",disabled:U,children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Export"]})}),(0,a.jsxs)(L,{children:[a.jsx(G,{onClick:()=>el("pdf"),children:"Export as PDF"}),a.jsx(G,{onClick:()=>el("csv"),children:"Export as CSV"})]})]}),"free"!==en&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:ed,disabled:ee,className:"flex items-center space-x-1",children:[ee?a.jsx(f.Z,{className:"h-4 w-4 animate-spin"}):a.jsx(h.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Ask AI"})]}),l&&a.jsx(i.z,{variant:"destructive",size:"sm",onClick:ei,disabled:S,children:S?"Deleting...":a.jsx(g.Z,{className:"h-4 w-4"})})]})]})}),a.jsx(_,{open:Q,onOpenChange:X,children:a.jsx(H,{asChild:!0,children:a.jsx(i.z,{variant:"ghost",size:"sm",children:Q?a.jsx(y.Z,{className:"h-4 w-4"}):a.jsx(v.Z,{className:"h-4 w-4"})})})}),(0,a.jsxs)(Y,{className:"mt-4",children:[a.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:ec().map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[a.jsx("p",{className:"text-sm text-gray-500",children:e.label}),a.jsx("p",{className:"font-medium",children:e.value})]},s))}),ea&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-100",children:[(0,a.jsxs)("h4",{className:"font-medium text-blue-800 mb-2 flex items-center",children:[a.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"AI Insights"]}),a.jsx("p",{className:"text-sm text-blue-700",children:ea})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-700",children:e.notes})]})]}),(0,a.jsxs)(CardFooter,{className:"flex justify-between pt-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(eo,{analysis:e,onVersionRestored:j}),a.jsx(et,{analysis:e})]}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:ei,disabled:S,className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:S?"Deleting...":"Delete"})]})]})}function ec({analyses:e,filters:s,onDelete:t,onBulkDelete:n,onExport:l,onBulkExport:o,onAskAI:d}){let{data:c}=(0,E.useSession)(),[m,u]=(0,r.useState)([]),[x,f]=(0,r.useState)(!1),h=e=>{u(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},y=async()=>{if(n&&0!==m.length)try{await n(m),u([]),$.Am.success("Selected analyses deleted successfully")}catch(e){console.error("Error deleting analyses:",e),$.Am.error("Failed to delete analyses")}},v=async e=>{if(o&&0!==m.length){f(!0);try{await o(m,e),$.Am.success(`Selected analyses exported as ${e.toUpperCase()}`)}catch(e){console.error("Error exporting analyses:",e),$.Am.error("Failed to export analyses")}finally{f(!1)}}},b=c?.user?.role==="pro"||c?.user?.role==="elite",j=[...e.filter(e=>(!s.search||!!e.propertyAddress.toLowerCase().includes(s.search.toLowerCase()))&&("all"===s.type||e.type===s.type))].sort((e,t)=>{switch(s.sortBy){case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();case"oldest":return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();case"price-high":return(t.data.price||0)-(e.data.price||0);case"price-low":return(e.data.price||0)-(t.data.price||0);case"revenue-high":return(t.data.revenue||0)-(e.data.revenue||0);case"revenue-low":return(e.data.revenue||0)-(t.data.revenue||0);default:return 0}});return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("div",{className:"flex items-center space-x-2",children:m.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:y,disabled:!n,children:[a.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Delete Selected"]}),b&&(0,a.jsxs)(T,{children:[a.jsx(O,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",disabled:x,children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Export Selected"]})}),(0,a.jsxs)(L,{children:[a.jsx(G,{onClick:()=>v("pdf"),children:"Export as PDF"}),a.jsx(G,{onClick:()=>v("csv"),children:"Export as CSV"})]})]})]})})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(e=>a.jsx(ed,{analysis:e,isSelected:m.includes(e.id),onSelect:h,onDelete:t,onExport:l,onAskAI:d},e.id))}),0===j.length&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"No analyses found"})})]})}},8974:(e,s,t)=>{"use strict";t.d(s,{z:()=>d});var a=t(95344),r=t(3729),n=t(32751),i=t(49247),l=t(91626);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...i},d)=>{let c=r?n.g7:"button";return a.jsx(c,{className:(0,l.cn)(o({variant:s,size:t,className:e})),ref:d,...i})});d.displayName="Button"},52072:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var a=t(95344),r=t(3729),n=t(91626);let i=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Input"},54073:(e,s,t)=>{"use strict";t.d(s,{JD:()=>r});var a=t(47674);function r(){let{data:e}=(0,a.useSession)();if(!e?.user)return"free";let s=e.user.role;return"elite"===s?"elite":"pro"===s?"pro":"free"}},45773:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n,p6:()=>l,xG:()=>i});var a=t(56815),r=t(79377);function n(...e){return(0,r.m6)((0,a.W)(e))}function i(e){return void 0===e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function l(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},91626:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(56815),r=t(79377);function n(...e){return(0,r.m6)((0,a.W)(e))}},98586:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(25036),r=t(8592),n=t.n(r),i=t(86843);let l=(0,i.createProxy)(String.raw`/Users/wolf/bnb-calc-clone/app/components/ClientProviders.tsx`),{__esModule:o,$$typeof:d}=l;l.default;let c=(0,i.createProxy)(String.raw`/Users/wolf/bnb-calc-clone/app/components/ClientProviders.tsx#ClientProviders`);function m({children:e}){return a.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:a.jsx("body",{className:n().className,children:a.jsx(c,{children:e})})})}t(67272)},67272:()=>{}};